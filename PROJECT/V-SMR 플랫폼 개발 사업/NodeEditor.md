
![[Pasted image 20250307140543.png]]

![[Pasted image 20250307140604.png]]

![[Pasted image 20250307140635.png]]
## 지침 
Web 기반 프로젝트를 만들고 있어, 
JavaScript, React로 구현하려고 해,  c++와 Qt Frameworks를 사용해서 desktop 어플리케이션은 많이 만들어봤지만 웹 어플리케이션은 초심자야 desktop app이랑 다르게 고려되어야할 부분이 있다면 체크해줘 

SMR 원자로의 2차 계통 설계를 하는 설계 툴을 만들려고해, MARS code로 실행되는 시뮬레이션의 inputfile을 만들려고해


# 개요 
- 유니티의 블루프린트, 언리얼의 비쥬얼 스크립팅과 같이 노드 기반 편집기 컨셉의
원자로 계통 설계 프로그램을 제작하는 프로젝트
- 유사한 역할을 수행하는 프로그램으로는 3KeyMaster, OpenModelica 등이 있다. 

## 기능명세
#### 공통
- 노드편집기의 화면 구성은 크게 3분할
- 좌측은 계통편집을 위한 편집 도구 모음 패널 
- 중앙은 계통 컴포넌트의 위치 설정, 컴포넌트간 연결을 생성하기 위한 편집 화면
- 우측은 선택된 컴포넌트의 속성을 수정하기 위한 Inspector 역할 수행
- Undo Redo 기능 지원

#### 작업 흐름
- 프로그램 초기 실행 시, 설계 프로젝트를 생성
- 좌측의 편집 도구 모음을 사용하여 원자로 계통 설계
- 검증 기능을 통해 설계된 계통의 흐름이 안전한지 파악할 수 
- 프로젝트에는 MARS 해석을 위한 전처리 파일을 생성할 수 있는 데이터로 구성됨
- JSON 형식으로 프로젝트 파일을 Save/Load 가능

#### 노드(계통 컴포넌트)
- 각 노드는 원자로 계통 설계에 사용되는 컴포넌트를 의미함 
- 노드는 다른 노드와 연결을 생성할 수 있다

#### 노드 편집 도구 모음
-  팔레트에서 생성하고자 하는 노드를 선택 드래그 앤 드롭으로 편집화면에 노드를 생성할 수 있는 기능 지원
- 팔레트의 각 요소는 원자로 설계에 사용되는 컴포넌트

#### 노드 편집 화면
- 노드는 클릭하여 선택 가능
- 노드는 선택 시 하이라이팅 스타일 
- 편집 화면에 생성된 노드는 마우스를 사용해 이동 가능
- 노드 간 연결 상태는 화살표를 통해 연결된 노드 상태를 보여줌

#### Inspector 
- 선택된 노드의 각 속성을 수정할 수 있는 기능 지원
- 노드 편집 화면에서 선택된 노드의 컴포넌트 종류에 따라 수정할 수 있는 항목이 달라짐


## 확장 방안
- **팔레트(좌측) → 에디터(중앙) 드롭**
    
    - 팔레트 요소를 **draggable**로 만들고, NodeEditor를 **droppable**로 만들어 “드롭 시 새 노드 생성” 로직을 구현할 수 있습니다.
    - dnd-kit에서는 **useDroppable**을 사용하거나, **DragOverlay**를 활용하면 됩니다.
    - 또는 간단히 HTML5 Drag & Drop을 팔레트 부분에만 쓰고, NodeEditor 영역은 dnd-kit으로 노드 이동을 처리하는 방식도 가능합니다.
- **노드 크기/컨텐츠에 따라 transform 기준점 조정**
    
    - 현재 예시에서는 `(left=node.x, top=node.y)`를 노드 왼상단으로 두고, `transform.x, transform.y`를 “추가 이동”으로 단순히 합산하고 있습니다.
    - 만약 **노드 중심**을 기준점으로 하고 싶다면, CSS transform-origin을 조정하거나 수학적으로 좌표를 재계산해야 합니다.
- **Edges(간선) 연동**
    
    - 기존 코드처럼 `<svg>`에 노드들 좌표를 기반으로 `<line>` 또는 `<path>`를 그려주면 됩니다.
    - onDragEnd 시 노드의 (x,y)가 바뀌면, Edge 렌더링도 자동으로 업데이트 되도록 **노드 좌표를 이용**해서 그립니다.
- **자유 배치 vs 정렬(리스트/그리드)**
    
    - dnd-kit의 **@dnd-kit/sortable**를 쓰면, “리스트 항목 재정렬” 같은 기능이 더 편리해집니다.
    - 하지만 “노드 그래프”처럼 자유 배치가 필요한 경우엔 그냥 core API로 충분히 구현 가능합니다.
- **Zoom / Pan / Mini-map** 등**
    
    - dnd-kit 자체에는 확대/축소, 뷰포트 이동 기능이 내장되지 않으므로, Canvas나 SVG의 transform, or 별도 “Pan & Zoom” 라이브러리와 결합해서 구현할 수 있습니다.