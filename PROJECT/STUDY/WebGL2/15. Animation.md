
애니메이션은 Frame **갱신 속도에 독립적**으로 만들어야함.
Frame간 소요된 시간을 계산하고, 이를 현재 Frame에서 애니메이션을 얼마나 진행해야 하는지를 계산하는데 사용

먼저 시간을 얻어와야 합니다. 다행히 `requestAnimationFrame`는 페이지가 로드된 시점으로부터의 시간을 전달해 줍니다.

`requestAnimationFrame`는 시간을 밀리세컨드(1/1000초) 단위로 전달해주지만

그러면 아래와 같이 소요 시간(delta time)을 계산할 수 있게 됩니다.

```js hl:15
var then = 0;
 
requestAnimationFrame(drawScene);
 
// 장면을 그립니다.
function drawScene(now) {
  // 시간을 초 단위로 변환합니다.
  now *= 0.001;
  // 현재 시간에서 이전 시간을 빼 줍니다.
  var deltaTime = now - then;
  // 다음 프레임의 현재 시간을 저장해 둡니다.
  then = now;
   ...
   
  rotation[1] += rotationSpeed * deltaTime;
  
```


### setInterval이나 setTimeout은 금기

여러분이 자바스트립트에서 애니메이션 프로그래밍을 해 보신 적이 있다면 `setInterval`이나 `setTimeout`을 사용해 드로잉 함수를 호출한 적이 있으실겁니다.

애니메이션을 위해 `setInterval`이나 `setTimeout`를 사용할 때의 문제점은 두 가지입니다. 먼저 `setInterval`과 `setTimeout` 둘 다 브라우저가 화면을 표시하는 것과는 **무관**하다는 것입니다. 
이 함수들은 브라우저가 새 프레임을 그리는 것과 동기화 되어있지 않아서 사용자의 환경에서는 동기화가 틀어질 수 있습니다.

`requestAnimationFrame`은 이 두가지 문제를 모두 해결해줍니다. 스크린과 애니메이션이 동기화되도록 적절한 시간에 여러분의 함수를 호출해주고 또한 탭이 화면에 표시되고 있을때만 호출합니다.