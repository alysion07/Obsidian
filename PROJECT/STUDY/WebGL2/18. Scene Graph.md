Scene Graph는 계층으로 구성됨

## Parent - child 

Scene Graph의 가장 중요한 기능은 2D 행렬에 필요한 부모-자식 관계를 제공한다는 것
물체에 적용할 행렬을 결정하는데 사용할 **구조**(**structure**)를 정의한다.

보통 Scene Graph의 각 `노드(Node)`는 **_Local Space_** 을 정의합니다.

구체적인 용어로 적어보자면 우리의 우주 시뮬레이션은 아래와 같이 작성할 수 있다.
```js
worldMatrixForMoon = galaxyMatrix * starMatrix * planetMatrix * moonMatrix;
```

```js
function computeWorldMatrix(currentNode, parentWorldMatrix) {
    // 자신의 지역 행렬과 부모의 월드 행렬을 곱해 
    // 자신의 월드 행렬을 계산합니다.
    var worldMatrix = m4.multiply(parentWorldMatrix, currentNode.localMatrix);
 
    // 모든 자식 노드들에 대해 동일한 작업을 반복합니다.
    currentNode.children.forEach(function(child) {
        computeWorldMatrix(child, worldMatrix);
    });
}
```

<img>![center|400](https://i.imgur.com/N6hGDjm.gif)
ref: [SolarSystem Example](http://172.16.37.4:8080/tutorial018_scene_graph_solar_system.html)



## SetParent vs AddChild

AddChild가 아니라 SetParent를 사용하는 이유. 아래와 같은 사고를 막기 위함.
```js
  someParent.addChild(someNode)
  ...
  someOtherParent.addChild(someNode);
```

코드를 봤을 때, `someNode`가 `someParent`와 `someOtherParent`에 동시에 추가 가능한 것처럼 보인다. 대부분의 장면 그래프에서 이는 **불가능**. 
두 번째 호출이 `ERROR: Already have parent`와 같은 오류를 생성해준다는 보장이 없다.
`someOtherParent`를 추가하기 전에 `someNode`를 `someParent`에서부터 자동적으로 제거해 줄까? `addChild`란 이름만 보고는 아무것도 확신할 수 없다.

```js
someNode.setParent(someParent);
...
someNode.setParent(someOtherParent);
```

이 경우 어떻게 될지는 100% 확실합니다. 의심의 여지가 없습니다.