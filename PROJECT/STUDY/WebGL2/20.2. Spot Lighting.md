Spot Lighting을 구현하기 위해서는 위치를 중심으로 빛이 향하는 특정 방향을 정해야한다. 그리고 빛이 향하는 방향마다 그 방향과 우리가 정한 특정 방향과의 내적을 구한 후 임계값을 기준으로 빛을 비출것인지 결정한다.
![[Pasted image 20240807155705.png|center|450]]
![[Pasted image 20240807160823.png | center|350]]

아래와 같은 체크로 조명효과 계산 가능 
```cpp  title:'spotlight fragment shader' hl:11,12,26,29-36 ar:32-35
#version 300 es
precision highp float;
 
// 정점 셰이더에서 넘어온 값
in vec3 v_normal;
in vec3 v_surfaceToLight;
in vec3 v_surfaceToView;
 
uniform vec4 u_color;
uniform float u_shininess;
uniform vec3 u_lightDirection;
uniform float u_limit;          // 내적 공간에서의 값
 
// 프래그먼트 셰이더에서는 출력값을 선언해야 합니다.
out vec4 outColor;
 
void main() {
  // v_normal은 보간되는 varying 이기 때문에 단위 벡터가 아닙니다.
  // 정규화를 해야 다시 단위 벡터가 됩니다.
  vec3 normal = normalize(v_normal);
 
  vec3 surfaceToLightDirection = normalize(v_surfaceToLight);
  vec3 surfaceToViewDirection = normalize(v_surfaceToView);
  vec3 halfVector = normalize(surfaceToLightDirection + surfaceToViewDirection);
 
  float light = 0.0;
  float specular = 0.0;
 
  float dotFromDirection = dot(surfaceToLightDirection,
                               -u_lightDirection);
  if (dotFromDirection >= u_limit) {
    light = dot(normal, surfaceToLightDirection);
    if (light > 0.0) {
      specular = pow(dot(normal, halfVector), u_shininess);
    }
  }
```

![[Pasted image 20240807171704.png|center|450]]

