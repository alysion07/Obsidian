## 공통 키

- `CCC0000`: `<name> <type>`    
- `phase`: `liquid|gas|mix|ctrl`    
- `flags.jefvcahs`: 접합 플래그 문자열    
- `loss.k_for|k_rev`: 방향별 손실계수    
- `ic.*`: 초기조건(압력, 온도, 유량 등)    

---

## snglvol

|슬롯|필드|설명|
|---|---|---|
|`CCC0000`|`name,type=snglvol`|헤더|
|`CCC0101`|`geom.area,len,vol`|체적 기하|
|`CCC0102`|`geom.az,geom.inc,geom.dz`|방향·고도|
|`CCC0103`|`rough,xhd`|거칠기·수력직경|
|`CCC0200`|`ic.ebt,ic.press,ic.temp`|초기조건|

---

## pipe

|슬롯|필드|설명|
|---|---|---|
|`CCC0000`|`name,type=pipe`|헤더|
|`CCC0001`|`cells`|셀 수|
|`CCC01[01..cells]`|`x.area[i]`|단면적(셀별)|
|`CCC02[01..cells]`|`x.len[i]`|길이|
|`CCC03[01..cells]`|`x.vol[i]`|체적|
|`CCC04[01..cells]`|`x.az[i],x.inc[i],x.dz[i]`|방향·고도|
|`CCC05[01..cells]`|`x.rough[i],x.hd[i]`|거칠기·직경|
|`CCC09[01..njun]`|`jun.loss_f,loss_r,jun.id`|접합 손실(세그먼트 경계)|
|`CCC10[01..cells]`|`x.flags[i], volId[i]`|볼륨 플래그|
|`CCC11[01..njun]`|`jun.flags, jun.num`|접합 플래그|
|`CCC12[01..cells]`|`ic.ebt,ic.press,ic.temp, volId[i]`|초기조건|
|`CCC13[01..njun]`|`flow.opt,mfl,mfv,jun.id`|유량 초기값|

---

## sngljun

|슬롯|필드|설명|
|---|---|---|
|`CCC0000`|`name,type=sngljun`|헤더|
|`CCC0101`|`from,to,area`|`CCCVV000N` → `CCCVV000N`|
|`CCC0102`|`loss.k_for,loss.k_rev,flags.jefvcahs`|손실/플래그|
|`CCC0201`|`flow.opt,mfl,mfv`|초기 유량|

---

## mtpljun

|슬롯|필드|설명|
|---|---|---|
|`CCC0000`|`name,type=mtpljun`|헤더|
|`CCC0001`|`n_jun, icond`|분기 수|
|`CCC01x1`×n|`from,to,area`|각 분기 x=분기 index|
|`CCC01x2`×n|`k_for,k_rev,flags,dischg,thermal`|손실·초킹|
|`CCC01x3`×n|`f_incre,t_incre,idx`|증가량·타임스텝|
|`CCC10x1`×n|`mfl,mfv,idx`|유량 초기값|

---

## branch

|슬롯|필드|설명|
|---|---|---|
|`CCC0000`|`name,type=branch`|헤더|
|`CCC0001`|`n_juns`|분기 수|
|`CCC01x1`×n|`from,to,area`|분기|
|`CCC01x2`×n|`k_for,k_rev,flags`|손실·플래그|
|`CCC02x1`×n|`mfl,mfv`|유량 초기값|

---

## pump

|슬롯|필드|설명|
|---|---|---|
|`CCC0000`|`name,type=pump`|헤더|
|`CCC0101`|`geom.area,len,vol`|기하|
|`CCC0102`|`geom.az,geom.inc,geom.dz`|방향·고도|
|`CCC0108`|`from,to,area`|흡입↔토출|
|`CCC0109`|`loss.k_for,loss.k_rev,flags.jefvcahs`|손실·플래그|
|`CCC0200`|`ic.press,ic.temp`|초기조건|
|`CCC0201`|`flow.opt,mfl,mfv`|유량 초기값|
|`CCC11[01..m]`|`curve.HQ[i]`|H-Q 테이블|
|`CCC12[01..m]`|`curve.BQ[i]`|B-Q(토크)|

---

## valve

|슬롯|필드|설명|
|---|---|---|
|`CCC0000`|`name,type=valve`|헤더|
|`CCC0101`|`from,to,area`|연결|
|`CCC0102`|`k_for,k_rev,flags.jefvcahs`|손실·플래그|
|`CCC0201`|`open_pct,Cv,fail_pos`|밸브 특성|
|`CCC0301`|`ctrl.link,trip.ref`|트립 연동|

---

## prizer (pressurizer)

|슬롯|필드|설명|
|---|---|---|
|`CCC0000`|`name,type=prizer`|헤더|
|`CCC0001`|`n_vol`|체적 수|
|`CCC0101..`|`vol.area,len,vol`|체적 기하|
|`CCC0200`|`ic.press,ic.temp,level`|초기조건|
|`CCC0301`|`htc.liq_vap,user`|열전달|
|`CCC0401`|`spray.d, nozzle..`|스프레이|

---

## sg (steam generator) + separator/dryer

|슬롯|필드|설명|
|---|---|---|
|`CCC0000`|`name,type=sg`|헤더|
|`CCC0101..`|`pri.tube/annulus geom`|1차측|
|`CCC0201..`|`sec.downcomer/dome`|2차측|
|`CCC0301`|`sep.eff`|분리기|
|`CCC0302`|`dryer.eff`|건조기|
|`CCC0401..`|`HT surface`|전열|
|`CCC0500`|`ic.press,temp,level`|초기조건|

---

## accumulator

|슬롯|필드|설명|
|---|---|---|
|`CCC0000`|`name,type=accumulator`|헤더|
|`CCC0101`|`geom.*`|기하|
|`CCC0200`|`p0, boron, temp`|초기조건|
|`CCC0108`|`from,to,area`|분사 라인|
|`CCC0109`|`loss.k_for,k_rev,flags`|손실·플래그|

---

## eccmixer

|슬롯|필드|설명|
|---|---|---|
|`CCC0000`|`name,type=eccmixer`|헤더|
|`CCC0001`|`n_ports=3`|주입·정상입구·출구|
|`CCC0101..0103`|`from,to,area`|각 포트|
|`CCC0104`|`k_for,k_rev,flags`|공통 손실|
|`CCC0201`|`inj.angle, mix.coeff`|혼합 특성|

---

## tmdpvol / tmdpjun

|슬롯|필드|설명|
|---|---|---|
|`CCC0000`|`name,type=tmdpvol`|헤더|
|`CCC0101`|`tbl.press/temp/void`|시간의존 테이블|
|`CCC0000`|`name,type=tmdpjun`|헤더|
|`CCC0101`|`from,to,area`|경계 접합|
|`CCC0102`|`tbl.flow/vel`|시간의존 유량|

---

## circltr

|슬롯|필드|설명|
|---|---|---|
|`CCC0000`|`name,type=circltr`|헤더|
|`CCC0101`|`from,to,area`|연결|
|`CCC0102`|`k_for,k_rev,flags`|손실·플래그|
|`CCC0201`|`qv.set`|순환 유량|

---

# 구현 지침

## 생성·검증
- **생성**: 타입 선택 → 노드 생성 → 포트 자동 배치 → `CCC` 자동 채번.    
- **연결**: 엣지 드래그 → `from/to`는 익스포트 시 `encode(CCC,VV,N)`.    
- **검증**:
        - out→in, phase 일치, capacity 제한.        
    - 슬롯 필수성: 표에 정의된 **필수 슬롯** 누락 시 에러.        
    - `loss`, `flags` 기본값 주입 가능하나 저장 전 사용자 확인 요구.       

## 익스포트
- 노드별: 헤더(`CCC0000`) → 표의 슬롯 순서대로 라인 생성.    
- 엣지별: 연결형 슬롯(`0101`,`0102` 등)에 from/to와 손실·플래그 반영.    
- 테이블형 곡선(H-Q 등): 행 수 자동 집계하여 연속 슬롯로 출력.    

## 설계 포인트
- 슬롯 번호는 **버전 차**가 존재할 수 있으므로, 상단 표를 **JSON 스키마**로 분리해 로더로 주입.   
- 예: `mars_schema.json`에 `type → [ {slot:"0101", key:"from,to,area", required:true}, ... ]`.