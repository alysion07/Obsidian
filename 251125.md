
노심코드 - 스핑크스 
1차 계통  + 2차 계통 - MARS
BOP - Modelica 

사용자
- 프로젝트
	- 형상
		- MARS 
			- 시뮬레이션 

---

유저 워크플로우 
- 시스템 -> 서브 시스템 -> 각 서브 시스템에 맞는 계통 편집
- **스토리보드 먼저 구성해서 공유** 
- 제안 
	- 노드 배치 후, 형상을 선택할 수 있는 기능 



---

# MARS DLL 연계 강의 ( 25.11.26)
 플랫폼에서 dt를 컨트롤해서 MARS를 조작해야함. 

MARS 초기입력값 받은 후, 스테디 스테이트로 실행 후 값을 visa로 전달함

800번 카드는 입력 단계에서 모두 완성

800번 카드가 허용할 수 있는 볼륨이나 제어값을 목록으로 띄워주고 사용자가 선택할 수 있도록하는 UI 를 제공하면 가능 


---
# MARS ViSA
## 개요 
MARS에서 조건 설정 후 Steady State 상태로 진행 후, 생성된 결과물을 가져와서 비자에 투영함 
Run / Pause / Stop 선택 가능 

## UI 구성 
리본 메뉴에서 각 역할별 탭으로 이동하는 형태 
#### Calculation Data 
첫화면에서는 각종 정션과 볼륨의 수치를 보여주는 역할을 함
##### Minor Edit
- Name / Value / Unit 탭으로 구성 
- RXPower(%)  / 100.000 / -
- PZR P(MPa) /15.545 / MPa
- SGTR  / 0 / kg/sec
##### Junction Data 
- No / name / type / flow rate(kg/sec) / Flow entalphy(KJ/kg) / flow area (m^2)
- [170-01]/act-core/ pipe_04 / 14952.762 / 1343.761 / 4.098
##### Volume Data 
- no / name / tpye / pressure (MPa) / Void Fraction(%) / Liquid Temp(C) Vapor Temp(C) / Density(kg/m^3) / Heat Addition (MW) / Boron Density(kg/m^3)
- [012-01] / cont1a-1 / tmdpvol / 0.001 / 100.00 / 99.632 / 99.632/ 0.590 / 0.0 /  0

#### System Mimic 
1. 3D 이미지 + 컴포넌트의 위치에 존재하는 라벨을 통해 주요 볼륨/정션의 물리량을 보여줌 
2. 게이지바를 통해 상태 가시화 
3. 우클릭으로 해당 노드의 챠트 데이터 제공 

#### Nodalization 
1. Defined Data - Minor Edit통해 정의된 각 노드들의 위치에 색상을 입혀 모니터되는 노드인지 식별 가능하도록 함 
2. VOID / TEMPF/TEMPG/ BORON / TFSUB / TGSUP 등 범례 타입에 따라 노달라이제이션 화면에 색상으로 컬러맵 제공 
3. 계통에 마우스 오버시, 해당 계통의 물리량을 범례에 반영 및 ID 제공 
4. 우클릭으로 해당 노드의 챠트 데이터 제공

#### interactive control
- 현재 ViSA의 컨트롤은 완성형 노형을 대상으로 작업된 결과물이기 때문에 다양한 컨트롤을 지원하지만, 설계 단계에서는 사용 불가능한 방식의 제어가 있을것
	- 경계조건 및 벨브 에어리어만 조건 부여 가능할 듯 
- 컨트롤 가능 여부에 대한 기준은 이승욱 박사님이 전달 가능


리액티비티 - 반응도 -> 노심출력 제어 
- 경계조건으로 노심의 출력을 제어할 수 있도록 하기 위함 
- 컨트롤 밸류로 대체도 가능할 것으로 예상

#### Trend Graph 
- add tile Graph / New Window 버튼 제공 
- Volume / Junction / Minor Edit 로 분류하여 트리에 보여줄 항목 선택 가능 
- 계통들의 리스트 제공되며 드래그 앤 드롭으로 추가된 타일에 그래프 렌더링 가능.
	- 복수의 컴포넌트 정보 렌더링 가능함 
	- 데이터 타입을 선택하여 해당 타입의 값을 그래프에 전달 하는듯 함
	- 다른 타입을 하나의 차트에도 렌더링 할 수 있음. 
	- 우클릭을 통해 챠트 색상이나 축에 대한 라벨 색상, 캡쳐 기능 설정 가능 
	- 
---
노드 클릭시 차트 

trip message 를 통해 알람 기능 구현 해야함 

## input file example 
```
801 trip  531 "Reactor Trip"
...
*tpm531 time  0 gt  null 0 1.0e6 | -1. "Reactor Trip"*
*
740 531 or  630  | -1. "Reactor Trip"

...


813 vlvarea 287 "PRZ Spray VV 1A"

```

---

# iPWR 

## Home 
- 간소화 모델 형태로 노형 전체 형상을 보여주며, 각 영역의 선택 가능한 노드를 선택하면 Systems 화면으로 이동 

## Overview
각 카테고리별 대시 보드 제공  포스트잇 형태의 영역으로 분리되어 있으며, 각 주요 팩터의 수치를 보여주는 화면 
- PIS -> RCS (power)
- CCS -> CBS - CCSP01 
- CBS -> CCS 
	- PDHR -> RCS -> PDHR 순환 - flow line1 / flow line2 
	- ADS -> RCS - total flow 
	- CIS -> RCS
	- RCS -> MSS / RCS -> ADS
- MSS - Venting / Steamline pres / flow to turbine / flow to CNR
- TUR - turning gear / speed (input field)
- FWS -> RCS 
- GEN - Breaker on / Generator total power 
- CNR - pressure 
- CWS - inlet temperature /outlet temp 
## Control 
 - PZR pressure control
	 - 압력 조절 인풋 필드 
	 - PZR의 압력 및 압력 레퍼런스에 대한 그래프 가시화 
	 - 최종 요구 전력 계산
	 - 
 - PZR Level control
	 - 최종 벨브 포지션 요구치 계산
	 - PID 를 거쳐가는 계통 
	 - level에 대한 그래프 가시화 
	 - 오토모드 / 매뉴얼 모드 설정 토글 버튼 
	 
 - Feedwater control 
	 - 펌프 1 /2 의 스피드 차트 
	 - 스팀 플로우 / 피드워터 플로우 차트
	 - 벨브 포지션에 대한 요구치 계산됨 
	 - 스팀 온도계 헤더 재가열,  PID / 피드 워터 펌프 1 / 2 
	 - Feedwater valve to SG 1/ 2 에 대한 벨브 계산 
 - Turbine control 
		- 터빈 인렛 밸류 계산 
			- 브레이크 조작 
			- 터빈 리딩 조작 버튼 
			- PID와 관련한 계산 
		- 터빈 로드 요구치 / 스팀 압력 / 터빈 스피드에 대한 계산 결과 제공 
		- 수동 조작 기능 
			- Run up / Sync 
		- setpoint 
			- turbine load demnad 
			- turbine load rate 
			
 - Turbine bypass control 
	 - 터빈 바이패스 벨브에 관한 각종 수치 가시화 
	 - LEAD LAG 
	 - 스팀 압력 / 온도에 따른 바이패스 모드 설정 
	 - 평균 온도와 레퍼런스 온도에 대한 챠트 
	 - 스팀 헤더 압력에 대한 차트
	 - 
 - Rods position control 
	 - 로드 움직임 제어 버튼 
	 - 현재 로드 상태에 대한 가시화 
	 - 터빈 리딩에 대한 조작 버튼 
	 - LAG
## Core 
- 노심관련 정보 
## Trips 
 - 각종 트립 조작을 위한 계기반 
## Systems
- 노달라이제이션 형태의 전체 노드 구서 상태 가시화 
- 각종 수치 모니터링 
- 노드 클릭시 자동/수동 모드 전환 ( 펌프 / 벨브 )
- MF (Malfunction ) 조작 

### Mal Function 
Number : 2 
SYStem  FWS 
Description: abnormal increase in fw flow 
Finnal  Severity / current severity 
Ramp Time 
			activate / deactivate
		\


각종 mal function에 대한 선택 및 정의 
타입 -> 노드 선택 -> 컴포넌트 선택 -> 조작 가능한 조건 부여 
-> 시뮬레이션에 적용하여 변경사항 관찰 및 알람 전송 

Specific Malfunction 

파라미터설정